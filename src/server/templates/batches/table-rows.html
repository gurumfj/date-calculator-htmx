{% for batch in batches %}
<tr class="hover:bg-gray-50">
    <td class="px-4 py-4 whitespace-nowrap text-sm text-gray-900 border-b">{{ batch.idx }}</td>
    <td class="px-4 py-4 whitespace-nowrap text-sm font-medium text-blue-600 border-b">{{ batch.batch_name }}</td>
    <td class="px-4 py-4 whitespace-nowrap text-sm text-gray-900 border-b">{{ batch.chicken_breed }}</td>
    <td class="px-4 py-4 whitespace-nowrap text-sm text-gray-900 border-b">{{ batch.breed_date }}</td>
    <td class="px-4 py-4 whitespace-nowrap text-sm text-gray-900 border-b">{{ batch.dayage }}</td>
    <td class="px-4 py-4 whitespace-nowrap text-sm text-gray-900 border-b">{{ batch.week_age }}</td>
    <td class="px-4 py-4 whitespace-nowrap text-sm text-gray-900 border-b">{{ batch.expire_date }}</td>
    <td class="px-4 py-4 whitespace-nowrap text-sm text-gray-900 border-b">{{ batch.total_b_male }}</td>
    <td class="px-4 py-4 whitespace-nowrap text-sm text-gray-900 border-b">{{ batch.total_b_female }}</td>
    <td class="px-4 py-4 whitespace-nowrap text-sm text-gray-900 border-b">{{ batch.sales_remain_male }}</td>
    <td class="px-4 py-4 whitespace-nowrap text-sm text-gray-900 border-b">{{ batch.total_count }}</td>
    <td class="px-4 py-4 whitespace-nowrap text-sm text-gray-900 border-b">{{ "%.1f"|format(batch.percentage) }}%</td>
    <td class="px-4 py-4 whitespace-nowrap text-sm text-gray-900 border-b">{{ "%.2f"|format(batch.fcr) if batch.fcr else "-" }}</td>
    <td class="px-4 py-4 whitespace-nowrap text-sm text-gray-900 border-b">{{ batch.feed or "-" }}</td>
    <td class="px-4 py-4 whitespace-nowrap text-sm text-gray-900 border-b">{{ batch.sales_open_date or "-" }}</td>
    <td class="px-4 py-4 whitespace-nowrap text-sm text-gray-900 border-b">{{ batch.sales_last_date or "-" }}</td>
</tr>
{% endfor %}

{% if has_more %}
<tr class="load-more-row">
    <td colspan="16" class="px-4 py-4 text-center border-t border-gray-200">
        <div 
            hx-get="/batches/data?chicken_breed={{ chicken_breed or '古早' }}{% if batch_name %}&batch_name={{ batch_name }}{% endif %}&view=table-rows&limit=20&offset={{ next_offset }}"
            hx-trigger="revealed"
            hx-target="closest tr"
            hx-swap="outerHTML"
            class="w-full h-12 flex items-center justify-center cursor-pointer hover:bg-gray-50 text-gray-500">
            載入更多...
        </div>
    </td>
</tr>
{% endif %}