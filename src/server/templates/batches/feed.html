{% extends "base.html" %}

{% block title %}飼料資料{% if batch_name %} - {{ batch_name }}{% endif %}{% endblock %}

{% block content %}
<div class="max-w-6xl mx-auto">
    <!-- Header with back link -->
    <div class="mb-4 p-4 border border-black bg-white">
        <div class="flex justify-between items-center">
            <h1 class="text-black">飼料資料{% if batch_name %} - {{ batch_name }}{% endif %}</h1>
            <a href="/batches" class="px-4 py-2 bg-white border border-black hover:bg-gray-100 font-bold">
                ← 返回批次摘要
            </a>
        </div>
    </div>

    <!-- Feed Data -->
    <div id="feed-container" class="p-4 border border-black bg-white">
        {% if feed_data %}
        {% for feed_group in feed_data %}
        <div class="mb-6 border border-black">
            <!-- 批次和位置標題 -->
            <div class="bg-gray-100 p-3 border-b border-black">
                <h3 class="font-bold text-lg">{{ feed_group.batch_name }}</h3>
                {% if feed_group.sub_location %}
                <p class="text-sm text-gray-600">位置: {{ feed_group.sub_location }}</p>
                {% endif %}
            </div>

            <!-- 飼料記錄詳情 -->
            <div class="p-2">
                {% if feed_group.feed_details %}
                <table class="responsive-table w-full border-collapse">
                    <thead>
                        <tr class="bg-gray-100">
                            <th class="border border-black p-2 text-left font-bold">日期</th>
                            <th class="border border-black p-2 text-left font-bold">廠商</th>
                            <th class="border border-black p-2 text-left font-bold">品項</th>
                            <th class="border border-black p-2 text-left font-bold">飼料週</th>
                            <th class="border border-black p-2 text-left font-bold">添加劑</th>
                            <th class="border border-black p-2 text-left font-bold">備註</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for feed in feed_group.feed_details %}
                        <tr class="border-b border-black">
                            <td class="border-r border-black p-2" data-label="日期">
                                {{ feed.feed_date or '-' }}
                            </td>
                            <td class="border-r border-black p-2" data-label="廠商">
                                {{ feed.feed_manufacturer or '-' }}
                            </td>
                            <td class="border-r border-black p-2" data-label="品項">
                                {{ feed.feed_item or '-' }}
                            </td>
                            <td class="border-r border-black p-2" data-label="飼料週">
                                {{ feed.feed_week or '-' }}
                            </td>
                            <td class="border-r border-black p-2" data-label="添加劑">
                                {{ feed.feed_additive or '-' }}
                            </td>
                            <td class="p-2" data-label="備註">
                                {{ feed.feed_remark or '-' }}
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
                {% else %}
                <p class="p-4 text-center text-gray-600">此批次無飼料記錄</p>
                {% endif %}
            </div>
        </div>
        {% endfor %}
        {% else %}
        <p class="p-4 text-center text-gray-600">無飼料記錄</p>
        {% endif %}
    </div>
</div>
{% endblock %}