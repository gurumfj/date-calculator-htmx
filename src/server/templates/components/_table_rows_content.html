{#
Template: _table_rows_content.html - Core content for table rows and pagination trigger

Required Variables:
- df: pandas.DataFrame - The data to display
- table: str - Table name for API endpoints
- sort_by_column: str|None - Current sort column
- sort_order: str - Sort order ("ASC" or "DESC")
- enable_event_links: bool - Whether to render event_id as clickable links
- has_more: bool - Whether there are more pages
- this_page: int - Current page number
#}

<!-- DEBUG: _table_rows_content.html, next_page={{ next_page }}, df.shape={{ df.shape if df is not none else 'None' }} -->
{% for row in df.values %}
<tr>
    {% for cell in row %}
    {% set header = df.columns[loop.index0] %}
    <td>
        {% if enable_event_links and header == 'event_id' and cell %}
        <a href="event/{{ cell }}" hx-get="event/{{ cell }}" hx-target="main" hx-push-url="true"
            style="color: #007bff; text-decoration: underline; cursor: pointer;">
            {{ (cell|string)[:8] }}...
        </a>
        {% else %}
        {{ cell if cell is not none else "" }}
        {% endif %}
    </td>
    {% endfor %}
</tr>
{% endfor %}
{% if has_more %}
<!-- DEBUG: Rendering load more button from _table_rows_content.html, next_page={{ next_page }} -->
<tr>
    <td colspan="{{ df.columns|length }}" style="text-align: center; padding: 20px; color: #666;"
        hx-get="q/{{ table }}/{{ 'ASC' if sort_order == 'DESC' else 'DESC' }}/{{ this_page + 1 }}"
        hx-vals='{"event_id": "{{ event_id }}", "column": "{{ sort_by_column }}"}'
        hx-target="closest tr" hx-swap="outerHTML" hx-trigger="revealed delay:500ms">
        載入更多... (page {{ this_page + 1 }})
    </td>
</tr>
{% else %}
<!-- DEBUG: Not rendering load more from _table_rows_content.html, next_page={{ next_page }} -->
{% endif %}
