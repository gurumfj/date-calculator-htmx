{% if not sales %}
    <!-- 空結果不顯示訊息，讓父模板處理 -->
{% else %}
{% for sale in sales %}
<tr class="hover:bg-blue-50 transition-colors duration-150 even:bg-gray-50">
    <!-- 日期欄位 -->
    <td class="font-medium text-gray-700">
        {{ sale['sale_date'] }}
    </td>
    <!-- 批次欄位 -->
    <td class="text-blue-600 hover:text-blue-800">
        <a href='#' 
           hx-get="q" 
           hx-vals='js:{search: "{{ sale['batch_name']|replace('"', '\\"') }}"}' 
           hx-target="closest tbody" 
           hx-swap="innerHTML" 
           @click="search = '{{ sale['batch_name']|replace("'", "\\'")|replace('"', '\\"') }}'"
        >{{ sale['batch_name'] }}</a>
    </td>
    <!-- 客戶欄位 -->
    <td class="text-blue-600 hover:text-blue-800">
        <a href='#' 
           hx-get="q" 
           hx-vals='js:{search: "{{ sale['customer']|replace('"', '\\"') }}"}' 
           hx-target="closest tbody" 
           hx-swap="innerHTML" 
           @click="search = '{{ sale['customer']|replace("'", "\\'")|replace('"', '\\"') }}'"
        >{{ sale['customer'] }}</a>
    </td>
    <!-- 公數欄位 -->
    <td class="text-center font-medium">
        {{ sale['male_count'] }}
    </td>
    <!-- 母數欄位 -->
    <td class="text-center font-medium">
        {{ sale['female_count'] }}
    </td>
    <!-- 公重欄位 -->
    <td class="text-right text-green-700 font-medium">
        {% if sale.male_avg_weight %}{{ "%.2f"|format(sale.male_avg_weight) }}{% else %}-{% endif %}
    </td>
    <!-- 母重欄位 -->
    <td class="text-right text-green-700 font-medium">
        {% if sale.female_avg_weight %}{{ "%.2f"|format(sale.female_avg_weight) }}{% else %}-{% endif %}
    </td>
    <!-- 公價欄位 -->
    <td class="text-right text-green-700 font-medium">
        {% if sale.male_price %}{{ "%.1f"|format(sale.male_price) }}{% else %}-{% endif %}
    </td>
    <!-- 母價欄位 -->
    <td class="text-right text-green-700 font-medium">
        {% if sale.female_price %}{{ "%.1f"|format(sale.female_price) }}{% else %}-{% endif %}
    </td>
</tr>
{% endfor %}
    <tr 
        hx-get="q?page={{ page + 1 }}&search={{ search }}"
        hx-target="closest tr"
        hx-swap="outerHTML"
        hx-trigger="revealed"
        class="opacity-0"
    ></tr>
{% endif %}
<!-- Load more trigger-->
