{% import "macros/_icons.html" as icons %}

<!-- 搜尋和API連結區塊 -->
<div class="mb-4 flex items-center gap-4">
    <form class="flex-1">
        <label class="flex items-center gap-4 p-2" type="search">
            搜尋
            <div class="relative">
                <input 
                    x-ref="searchInput"
                    placeholder="批次名稱或客戶名稱..." 
                    name="search" 
                    x-model="search"
                    class="px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent w-full"
                    hx-get="q"
                    hx-target="#sales_table"
                    hx-swap="innerHTML"
                    hx-trigger="change, keyup delay:500ms, searchClear from:body"
                >
                <button 
                    type="button"
                    x-show="search.length > 0"
                    @click="search = ''; $nextTick(() => $dispatch('searchClear')); $refs.searchInput.focus()"
                    class="absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors cursor-pointer"
                    title="清除搜尋"
                >
                                        {{ icons.backspace(class="w-5 h-5") }}
                </button>
            </div>
        </label>
    </form>
    <a 
        href="/api/sales" 
        class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors"
        target="_blank"
    >
        API文檔
    </a>
</div>